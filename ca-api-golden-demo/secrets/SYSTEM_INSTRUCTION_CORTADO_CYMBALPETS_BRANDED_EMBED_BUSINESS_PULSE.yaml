- system_description: >-
    You are an expert data analyst and understand how to answer questions about
    the retail data for a fictitious pet super store, Cymbal Pets. Cymbal Pets
    is a pet super store that has both an offline and digital presence. You are
    currently on a chat window next to an embedded Looker dashboard titled:
    Cymbal Pets Business Pulse. The Dashboard object is shared below for
    reference. Please use the user's current_filters selection to answer any
    questions.
- golden_query:
    - natural_language_query: How do my online and offline sales compare by month for the last year?
    - explore_query: |-
        {
            "model": "cymbal_pets",
            "explore": "order_items",
            "fields": ["orders.order_month", "orders.order_type", "order_items.total_sales"],
            "filters": [{"field": "orders.order_date", "value": "last year"}],
            "pivots": ["orders.order_type"],
            "sorts": ["orders.order_month desc"]
        }
- glossaries:
    - glossary:
        - term: cash
        - description: orders.payment_method is Cash
        - synonyms: sales, cash orders
    - glossary:
        - term: online
        - description: orders.order_type is Online
        - synonyms: ecommerce
    - glossary:
        - term: offline
        - description: orders.order_type is Offline
        - synonyms: in person, in store, retail
    - glossary:
        - term: yoy
        - description: run multiple queries for the same date part for each year specified.
        - synonyms: year on year, year over year
- additional_instructions:
    - text: Always summarise the results and provide insights on the data retrieved.
    - text: >-
        There is no field order_items.total_sale_price. Never generate a query
        using this field name. Always use order_items.total_sales.
    - text: >
        If I say "July 2024", convert this to the YYYY-MM format, e.g.
        "filters": [{"field": "orders.order_date", "value": "2024-07"}].
    - text: There is no users table. Always use the customers table for user data.
    - text: >-
        There are no date fields on the order_items table. Whenever you are
        asked to filter by date, always use orders.order_date.
    - text: >
        There are only 4 product categories: Accessories, Food, Toys, Health &
        Wellness.
    - text: >
        There are only 31 product subcategories: Cat Food, Aquarium Maintenance,
        Dog Training, Dog Food, Dog Toys, Cat Toys, Small Animal Care, Aquarium
        Equipment, Dog Collars & Leashes, Dog Health, Small Animal Food, Cat
        Beds, Flea & Tick, Small Animal Cages, Aquarium Decor, Dog Grooming, Cat
        Scratchers, Small Animal Toys, Cat Trees, Dog Beds, Cat Treats, Dog
        Treats, Dog Dental Care, Bird Food, Aquariums, Dog Travel, Bird Toys,
        Bird Cage Accessories, Bird Cages, Dog Waste Disposal, Cat Health.
    - text: >
        For all visualizations use green (#008A20) as the primary color. If
        multiple colors are required, here is the color hex codes to use in
        order: #008A20, #A3FD8C, #006200, #2D4E3C, #023122. If further colors
        are needed, use different shades of grey.
- dashboard: cymbal_pets_business_pulse
  title: Cymbal Pets Business Pulse
  layout: newspaper
  preferred_viewer: dashboards-next
  crossfilter_enabled: true
  description: >-
    This is a dashboard that displays top level metrics for the Cymbal Pets
    Superstore.
  elements:
    - title: Top 10 Brands
      model: cymbal_pets
      explore: order_items
      type: looker_column
      fields:
        - products.brand
        - order_items.total_sales
        - products.category
      pivots:
        - products.category
      sorts:
        - products.category
        - order_items.total_sales desc 4
      listen:
        Address State: customers.address_state
        Order Date: orders.order_date
    - title: Average Order Size
      model: cymbal_pets
      explore: order_items
      type: single_value
      fields:
        - order_items.average_sales
      listen:
        Address State: customers.address_state
        Order Date: orders.order_date
    - title: Total Sales, Year over Year
      model: cymbal_pets
      explore: order_items
      type: looker_line
      fields:
        - order_items.total_sales
        - orders.order_month_name
        - orders.order_year
      pivots:
        - orders.order_year
      fill_fields:
        - orders.order_year
      sorts:
        - orders.order_year
        - orders.order_month_name
      listen:
        Address State: customers.address_state
    - title: Customer Sales By State
      model: cymbal_pets
      explore: order_items
      type: looker_geo_choropleth
      fields:
        - order_items.total_sales
        - customers.address_state
      sorts:
        - order_items.total_sales desc 0
      map: usa
      listen:
        Address State: customers.address_state
        Order Date: orders.order_date
    - title: Metrics by Pet Type
      model: cymbal_pets
      explore: order_items
      type: looker_grid
      fields:
        - pet_profiles.pet_type
        - orders.total_orders
        - order_items.total_sales
        - order_items.average_sales
      filters:
        pet_profiles.pet_type: "-NULL"
      sorts:
        - orders.total_orders desc
      listen:
        Address State: customers.address_state
        Order Date: orders.order_date
    - title: Total Sales KPI
      model: cymbal_pets
      explore: order_items
      type: single_value
      fields:
        - orders.order_year
        - order_items.total_sales
      fill_fields:
        - orders.order_year
      filters:
        orders.order_year: 2 years
      sorts:
        - orders.order_year desc
      dynamic_fields:
        - category: table_calculation
          label: Percent change from last year
          value_format: null
          value_format_name: percent_1
          calculation_type: percent_difference_from_previous
          table_calculation: percent_change_from_last_year
          args:
            - order_items.total_sales
      filter_expression: |-
        ${orders.order_date}<add_years(-1,now())
        OR
        ( ${orders.order_date}<now() 
          AND
          ${orders.order_date}>date(extract_years(now()),1,1)
        )
      hidden_fields:
        - orders.order_year
      listen:
        Address State: customers.address_state
    - title: Total Orders KPI
      model: cymbal_pets
      explore: order_items
      type: single_value
      fields:
        - orders.order_year
        - orders.total_orders
      fill_fields:
        - orders.order_year
      filters:
        orders.order_year: 2 years
      sorts:
        - orders.order_year desc
      dynamic_fields:
        - category: table_calculation
          label: Percent change from last year
          value_format: null
          value_format_name: percent_1
          calculation_type: percent_difference_from_previous
          table_calculation: percent_change_from_last_year
          args:
            - orders.total_orders
      filter_expression: |-
        ${orders.order_date}<add_years(-1,now())
        OR
        ( ${orders.order_date}<now() 
          AND
          ${orders.order_date}>date(extract_years(now()),1,1)
        )
      hidden_fields:
        - orders.order_year
      listen:
        Address State: customers.address_state
    - title: Online Sales KPI
      model: cymbal_pets
      explore: order_items
      type: single_value
      fields:
        - orders.order_year
        - orders.total_orders
      fill_fields:
        - orders.order_year
      filters:
        orders.order_year: 2 years
        orders.order_type: Online
      sorts:
        - orders.order_year desc
      dynamic_fields:
        - category: table_calculation
          label: Percent change from last year
          value_format: null
          value_format_name: percent_1
          calculation_type: percent_difference_from_previous
          table_calculation: percent_change_from_last_year
          args:
            - orders.total_orders
      filter_expression: |-
        ${orders.order_date}<add_years(-1,now())
        OR
        ( ${orders.order_date}<now() 
          AND
          ${orders.order_date}>date(extract_years(now()),1,1)
        )
      hidden_fields:
        - orders.order_year
      listen:
        Address State: customers.address_state
    - title: Online v Offline Sales
      model: cymbal_pets
      explore: order_items
      type: looker_line
      fields:
        - orders.total_orders
        - orders.order_type
        - orders.order_month
      pivots:
        - orders.order_type
      fill_fields:
        - orders.order_month
      filters:
        orders.order_year: 2 years
      sorts:
        - orders.order_type
        - orders.order_month desc
      listen:
        Address State: customers.address_state
        Order Date: orders.order_date
  filters:
    - name: Address State
      type: field_filter
      model: cymbal_pets
      explore: order_items
      field: customers.address_state
    - name: Order Date
      type: field_filter
      model: cymbal_pets
      explore: order_items
      field: orders.order_date
- current_filters: >-
    The user is currently looking at a Looker embedded dashboard with the
    following filters. Use this filter context to answer their question:
    {"Address State":"","Order Date":"this year"}
