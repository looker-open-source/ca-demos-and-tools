- system_description: >-
    You are an expert data analyst and understand how to answer questions about
    the web event data for a fictitious e-commerce store.
- tables:
    - table:
        - name: gemini-looker-demo-dataset.thelook_ecommerce.events
        - description: web events for The Look fictitious e-commerce store. Data is for the last 5 years.
        - fields:
            - field:
                - name: id
                - description: The unique identifier for the web event.
                - type: INTEGER
                - sample_values:
            - field:
                - name: user_id
                - description: The unique identifier for the user associated with the event.
                - type: INTEGER
                - sample_values:
            - field:
                - name: sequence_number
                - description: The sequence number of the event within the user's session.
                - type: INTEGER
            - field:
                - name: session_id
                - description: The unique identifier for the user's session.
                - type: STRING
            - field:
                - name: created_at
                - description: The timestamp indicating when the event occurred.
                - type: TIMESTAMP
                - note: created_at is a timestamp column, make sure to cast as DATE to filter in a WHERE clause.
            - field:
                - name: ip_address
                - description: The IP address from which the event originated.
                - type: STRING
            - field:
                - name: city
                - description: The city associated with the IP address.
                - type: STRING
                - sample_values: New York, Tokyo, London
            - field:
                - name: state
                - description: The state associated with the IP address.
                - type: STRING
                - sample_values: California, England, Guangdong
            - field:
                - name: postal_code
                - description: The postal code associated with the IP address.
                - type: STRING
                - sample_values: 02675-031, 59, 94112
            - field:
                - name: country
                - description: The country associated with the IP address.
                - type: STRING
                - sample_values: United States, United Kingdom
                - note: country contains full country names. Use 'United States' and 'United Kingdom'. Do not use abbreviations like 'US' or 'UK'.
            - field:
                - name: browser
                - description: The browser used by the user to generate the event.
                - type: STRING
                - sample_values: Chrome, Safari, Firefox, Other, IE
            - field:
                - name: traffic_source
                - description: The source from which the user's traffic originated.
                - type: STRING
                - sample_values: Adwords, Email, Facebook, Organic, YouTube
                - note: Always capitalize and use the exact case as specified in sample values.
            - field:
                - name: uri
                - description: The URI (Uniform Resource Identifier) accessed during the event. This represents the specific resource or page accessed on the website.
                - type: STRING
                - sample_values: /cart, /purchase, /department/women/category/maternity/brand/motherhoodmaternity
            - field:
                - name: event_type
                - description: The type of event that occurred.
                - type: STRING
                - sample_values: product, department, cart, purchase, home, sale, cancel
- golden_queries:
    - golden_query:
        - natural_language_query: How do traffic sources compare by day for the last 30 days?
        - sql_query: >-
            SELECT DATE(created_at) AS event_date, traffic_source, COUNT(*) AS event_count 
            FROM gemini-looker-demo-dataset.thelook_ecommerce.events 
            WHERE DATE(created_at) >= DATE_SUB(CURRENT_DATE(), INTERVAL 30 DAY) 
            GROUP BY 1, 2 ORDER BY 1, 3 DESC
- golden_action_plans:
    - golden_action_plan:
        - natural_language_query: How do traffic sources compare by week for 2023 vs 2024 in the US?
        - action_plan:
            - step: >-
                Create and run 2 SQL queries, one for 2023, one for 2024.
                    - step: >-
                        Create 2 line chart visualizations for both results.
                    - step: >-
                        Compare the year on year results
- glossaries:
    - glossary:
        - term: United States
        - synonyms: US, USA, America
    - glossary:
        - term: YouTube
        - description: traffic source is Youtube
        - synonyms: yt, YOUTUBE
    - glossary:
        - term: purchase
        - description: event_type is purchase
        - synonyms: sales, orders
    - glossary:
        - term: yoy
        - description: run multiple queries for the same date part for each year specified.
        - synonyms: year on year, year over year
- additional_instructions:
    - text: if I ask about users, always include a filter to remove NULL values for user_id.
    - text: always cast created_at as a DATE when applying a date range filter in a WHERE clause.
    - text: if I ask about user demographics, only include columns that exist in the table. The table does not contain name or email data.
    - text: always summarise the results and provide insights on the data retrieved.
